<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Certificación | Theritex</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header class="header">
  <div class="logo">Theritex</div>
  <nav class="nav">
    <a href="index.html">Inicio</a>
    <a href="sobre.html">Sobre mí</a>
    <a href="desarrollo.html">Desarrollo</a>
    <a href="certificacion.html" class="active">Certificación</a>
    <a href="curriculum.html">Currículum</a>
  </nav>
</header>

<section class="cert-section">
  <h1 class="second-title">Títulos</h1>
  <div id="titulosGrid" class="cert-grid"></div>

  <h1 class="second-title">Idiomas</h1>
  <div id="idiomasGrid" class="cert-grid"></div>

  <h1 class="second-title">Certificados</h1>
  <div id="certGrid" class="cert-grid"></div>

  <h1 class="second-title">Diplomas</h1>
  <div id="diplomasGrid" class="cert-grid"></div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Galleries: each entry is an object { title, files: [..] }
  const galleries = {
    titulos: [
      { title: 'Título ESO (pág. 1–2)', files: [
        'certificados/titulos/TituloESO.jpg',
        'certificados/titulos/TituloESO2.jpg'
      ] }
    ],
    idiomas: [
      { title: 'Inglés B1 Cambridge', files: ['certificados/cert/CAMBRIDGE_B1_CERTIFICATE.jpg'] },
      { title: 'Inglés B2 Cambridge', files: ['certificados/cert/CAMBRIDGE_B2_CERTIFICATE.jpg'] }
    ],
    certificados: [
      { title: 'Analítica Web', files: ['certificados/cert/Analítica Web_page-0001.jpg'] },
      { title: 'Desafío Cyber Up', files: ['certificados/cert/DESAFIO_CYBER_UP.jpg'] },
      { title: 'Excel Avanzado', files: ['certificados/cert/Excel Avanzado_page-0001.jpg'] },
      { title: 'Ciberseguridad (GL)', files: ['certificados/cert/GL Ciberseguridad en el Entorno Educativo - FT Ed 12_page-0001.jpg'] },
      { title: 'Growth Hacking (GL)', files: ['certificados/cert/GL Growth Hacking - FT Ed 12_pages-to-jpg-0001.jpg'] },
      { title: 'GL FT Diploma - Ciber', files: ['certificados/cert/_ GL FT Diploma - Ciber_pages-to-jpg-0001.jpg'] }
    ],
    diplomas: [
      { title: 'RHEL RHCSA (pág. 1–2)', files: [
        'certificados/diplomas/RHEL_RHCSA_25_0999_060_pages-to-jpg-0001.jpg',
        'certificados/diplomas/RHEL_RHCSA_25_0999_060_pages-to-jpg-0002.jpg'
      ] }
    ]
  };

  function makeTitle(path) {
    const name = path.split('/').pop();
    return name
      .replace(/\.jpe?g$|\.png$/i, '')
      .replace(/[_\-]+/g, ' ')
      .replace(/\s+\d+\s*/g, ' ')
      .trim();
  }

  function buildGrid(entries, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;
    // ordenar por título
    entries.sort((a,b)=> a.title.toLowerCase().localeCompare(b.title.toLowerCase()));
    entries.forEach(entry => {
      const card = document.createElement('div');
      card.className = 'cert-card';
      card.setAttribute('data-files', JSON.stringify(entry.files));
      card.setAttribute('role', 'button');
      card.tabIndex = 0;

      const label = document.createElement('div');
      label.className = 'card-label';
      label.textContent = entry.title;

      const overlay = document.createElement('div');
      overlay.className = 'card-overlay';
      overlay.textContent = 'Click para abrir';

      card.appendChild(label);
      card.appendChild(overlay);

      card.addEventListener('click', ()=> {
        const files = JSON.parse(card.dataset.files || '[]');
        openModalWithFiles(files, 0);
      });
      card.addEventListener('keydown', (e)=> { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); const files = JSON.parse(card.dataset.files || '[]'); openModalWithFiles(files, 0); } });

      container.appendChild(card);
    });
  }

  // Modal and navigation
  const modal = document.getElementById('imgModal');
  const modalImg = document.getElementById('modalImg');
  const closeBtn = document.querySelector('.close-modal');
  const prevBtn = document.querySelector('.modal-prev');
  const nextBtn = document.querySelector('.modal-next');
  const backBtn = document.querySelector('.modal-back');

  let currentFiles = [];
  let currentIndex = 0;

  function openModalWithFiles(files, idx) {
    if (!modal || !modalImg || !files || files.length === 0) return;
    currentFiles = files;
    currentIndex = idx || 0;
    updateModalImage();
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  function updateModalImage() {
    if (!modalImg) return;
    modalImg.src = currentFiles[currentIndex];
    modalImg.alt = '';
    if (prevBtn) prevBtn.disabled = (currentIndex === 0);
    if (nextBtn) nextBtn.disabled = (currentIndex >= currentFiles.length - 1);
  }

  function closeModal() {
    if (!modal) return;
    modal.style.display = 'none';
    modalImg.src = '';
    currentFiles = [];
    currentIndex = 0;
    document.body.style.overflow = '';
  }

  function showPrev() {
    if (currentIndex > 0) { currentIndex--; updateModalImage(); }
  }

  function showNext() {
    if (currentIndex < currentFiles.length - 1) { currentIndex++; updateModalImage(); }
  }

  if (closeBtn) closeBtn.addEventListener('click', closeModal);
  if (backBtn) backBtn.addEventListener('click', closeModal);
  if (prevBtn) prevBtn.addEventListener('click', showPrev);
  if (nextBtn) nextBtn.addEventListener('click', showNext);
  if (modal) modal.addEventListener('click', (e)=> { if (e.target === modal) closeModal(); });
  document.addEventListener('keydown', (e)=> {
    if (e.key === 'Escape') closeModal();
    if (e.key === 'ArrowLeft') showPrev();
    if (e.key === 'ArrowRight') showNext();
  });

  // Construir galerías
  buildGrid(galleries.titulos, 'titulosGrid');
  buildGrid(galleries.idiomas, 'idiomasGrid');
  buildGrid(galleries.certificados, 'certGrid');
  buildGrid(galleries.diplomas, 'diplomasGrid');
});
</script>

<!-- ===== MODAL IMAGEN ===== -->
<div class="img-modal" id="imgModal">
  <button class="modal-back" aria-label="Volver" type="button">Volver</button>
  <button class="close-modal" aria-label="Cerrar" type="button">&times;</button>
  <button class="modal-prev" aria-label="Anterior" type="button">◀</button>
  <img class="modal-content" id="modalImg">
  <button class="modal-next" aria-label="Siguiente" type="button">▶</button>
</div>

<footer>
  <p>&copy; 2025 Theritex | Diseñado por Nisamov</p>
</footer>

<script src="script.js"></script>
</body>
</html>
